<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Birthday Surprise â€” Private</title>
  <style>
    :root{
      --bg1: #0f0710;
      --card-bg: rgba(255,255,255,0.03);
      --accent: #ff4da6;
      --muted: rgba(255,255,255,0.8);
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,#130017 0,#2b071b 100%);font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;color:#fff;overflow:hidden}
    /* Password screen */
    #pw-screen{
      position:fixed;inset:0;display:flex;align-items:center;justify-content:center;flex-direction:column;z-index:2000;
      background: radial-gradient(circle at 30% 20%, rgba(255,77,166,0.12), transparent 15%), linear-gradient(135deg,#ffb6d9 0,#ff6aa9 100%);
      gap:12px;padding:32px;
    }
    #pw-screen h2{font-size:1.6rem;margin:0;color:#111}
    #pw-input{padding:12px 14px;border-radius:10px;border:none;font-size:1rem;width:260px;text-align:center}
    #pw-btn{padding:10px 18px;border-radius:10px;border:none;background:#111;color:var(--accent);font-weight:600;cursor:pointer}
    /* Layout */
    #app{
      position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;
    }

    /* Card style image viewer */
    .card {
      width: min(760px, 92%);
      height: min(460px, 64vh);
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.02));
      border-radius: 18px;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 10px 30px rgba(0,0,0,0.6);
      position:relative;
      overflow:hidden;
      border: 1px solid rgba(255,255,255,0.06);
    }

    .card-inner{
      width: calc(100% - 48px);
      height: calc(100% - 48px);
      display:flex;
      align-items:center;
      justify-content:center;
      border-radius: 14px;
      background: rgba(0,0,0,0.25);
      position:relative;
    }

    /* Images - keep aspect ratio, do not stretch */
    .card img{
      max-width: 100%;
      max-height: 100%;
      object-fit: contain; /* preserves aspect ratio; no stretch */
      user-drag: none;
      user-select: none;
      -webkit-user-drag: none;
      pointer-events: none;
      border-radius: 10px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.6);
      transform-origin:center center;
      transition: transform 700ms cubic-bezier(.2,.9,.2,1), filter 600ms;
      filter: drop-shadow(0 12px 30px rgba(0,0,0,0.6));
      background: radial-gradient(circle at center, rgba(255,255,255,0.02), transparent 40%);
    }

    /* Buttons */
    .nav {
      position:absolute; top:50%; transform:translateY(-50%); width:48px;height:48px;border-radius:10px;border:none;background:rgba(0,0,0,0.35);backdrop-filter: blur(4px); color:white; cursor:pointer;
      display:flex;align-items:center;justify-content:center;font-size:20px;
    }
    .nav:active{transform:translateY(-50%) scale(.98)}
    #prev{left:12px}
    #next{right:12px}

    /* Info / footer controls */
    .controls {
      margin-top:18px; display:flex; gap:12px; align-items:center; justify-content:center;
    }
    .btn{
      padding:8px 14px;border-radius:10px;border:none;background:transparent;color:var(--muted);cursor:pointer;border:1px solid rgba(255,255,255,0.06)
    }
    .btn:active{transform:scale(.98)}

    /* Video container (hidden until images finished) */
    #video-wrap{
      display:none; margin-top:18px; width: min(820px,92%); text-align:center;
    }
    video{
      width:100%; max-height:60vh; border-radius:14px; background:black; outline:none; box-shadow:0 10px 30px rgba(0,0,0,0.5)
    }

    /* Message screen */
    #message-screen{
      display:none; position:absolute; inset:0; background: linear-gradient(180deg, rgba(0,0,0,0.6), rgba(10,2,10,0.7)); z-index:1500;
      display:flex;align-items:center;justify-content:center;padding:40px;
    }
    #message-card{
      width:min(900px,95%); max-height:85vh; overflow:auto; background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01)); padding:28px; border-radius:14px; box-shadow:0 20px 60px rgba(0,0,0,0.6)
    }
    #message-text{
      color:#fff; font-size:1.05rem; line-height:1.8rem; white-space:pre-wrap; font-family:Georgia, 'Times New Roman', serif;
    }

    /* small helpers */
    .hidden{display:none !important}
    /* responsive */
    @media (max-width:720px){
      .card{height:56vh}
      #message{font-size:1.4rem; bottom:28%}
      #pw-input{width:200px}
    }
  </style>
</head>
<body translate="no" oncontextmenu="return false;">

  <!-- PASSWORD -->
  <div id="pw-screen" aria-hidden="false">
    <h2>Enter Password to Open ðŸ’Œ</h2>
    <input id="pw-input" type="password" placeholder="Enter password" autocomplete="off" />
    <div style="display:flex;gap:10px;align-items:center">
      <button id="pw-btn">Enter</button>
    </div>
    <small style="color:#111; margin-top:12px; background:white;padding:6px 10px;border-radius:8px;">(private â€” do not share)</small>
  </div>

  <!-- APP -->
  <div id="app" aria-hidden="true">
    <div class="card" role="region" aria-label="Image card">
      <div class="card-inner" id="card-inner">
        <!-- image will be injected here -->
        <img id="current-img" src="" alt="Photo" draggable="false" />
      </div>

      <button class="nav" id="prev" title="Previous (Left arrow)">&larr;</button>
      <button class="nav" id="next" title="Next (Right arrow)">&rarr;</button>
    </div>

    <div class="controls" id="controls">
      <button class="btn" id="first-btn">First</button>
      <div id="page-info" style="min-width:120px; text-align:center; color:var(--muted)"></div>
      <button class="btn" id="last-btn">Last</button>
      <button class="btn" id="play-video-btn">Play video after images</button>
    </div>

    <div id="video-wrap" aria-hidden="true">
      <video id="video-player" controls controlsList="nodownload" playsinline webkit-playsinline poster="" crossorigin="anonymous"></video>
    </div>
  </div>

  <!-- Message screen (separate) -->
  <div id="message-screen" aria-hidden="true">
    <div id="message-card">
      <div id="message-text"></div>
    </div>
  </div>

  <script>
  /***** CONFIG â€” change these names if your files are different *****/
  const images = [
    'assets/photo1.jpg',
    'assets/photo2.jpg',
    'assets/photo3.jpg',
    'assets/photo4.jpg',
    'assets/photo5.jpg',
    'assets/photo6.jpg',
    'assets/photo7.jpg',
    'assets/photo8.jpg'
  ];
  const videos = [
    'assets/part1.mp4',
    'assets/part2.mp4',
    'assets/part3.mp4',
    'assets/part4.mp4',
    'assets/part5.mp4',
    'assets/part6.mp4',
    'assets/part7.mp4'
  ];
  const PASSWORD = "I AM IDIOT"; // exact password
  const longMessage = `Happy birthday Thachuu â€” Rasi!
Wishing you the happiest year ahead. May your days be filled with laughter, success, and the little moments that make life beautiful.
Thank you for being you. Love, Abhi.`; // can be longer

  /***** UI elements *****/
  const pwScreen = document.getElementById('pw-screen');
  const pwInput = document.getElementById('pw-input');
  const pwBtn = document.getElementById('pw-btn');
  const app = document.getElementById('app');
  const currentImg = document.getElementById('current-img');
  const prevBtn = document.getElementById('prev');
  const nextBtn = document.getElementById('next');
  const firstBtn = document.getElementById('first-btn');
  const lastBtn = document.getElementById('last-btn');
  const pageInfo = document.getElementById('page-info');
  const playVideoBtn = document.getElementById('play-video-btn');
  const videoWrap = document.getElementById('video-wrap');
  const videoPlayer = document.getElementById('video-player');
  const messageScreen = document.getElementById('message-screen');
  const messageText = document.getElementById('message-text');

  /* state */
  let index = 0;
  let slideAnimating = false;
  let videoIndex = 0;
  let autoplayVideoAfterImages = false;

  /* initialize */
  function updatePageInfo(){
    pageInfo.textContent = `Photo ${index+1} / ${images.length}`;
  }

  function setImage(i, withTransform=true){
    if(i < 0 || i >= images.length) return;
    index = i;
    updatePageInfo();
    // set src
    currentImg.style.opacity = 0;
    // small delay to allow CSS transition
    setTimeout(()=>{
      currentImg.src = images[index];
      currentImg.alt = `Photo ${index+1}`;
      currentImg.onload = () => {
        // apply transform animation for this image
        if(withTransform) applyTransformToImage(currentImg, index);
        currentImg.style.opacity = 1;
      };
      currentImg.onerror = () => {
        // show a simple fallback visual if image fails
        currentImg.style.opacity = 1;
        currentImg.src = '';
        currentImg.alt = `Unable to load photo ${index+1}`;
        currentImg.style.filter = 'grayscale(80%)';
      };
    }, 130);
  }

  function applyTransformToImage(imgElement, idx){
    // create a visually different transform per index: scale + rotate + translate subtle
    const transforms = [
      'translateY(0) scale(1) rotate(0deg)',
      'translateY(-6px) scale(1.02) rotate(-1deg)',
      'translateX(6px) scale(1.03) rotate(1deg)',
      'translateY(6px) scale(1.02) rotate(-0.6deg)',
      'translateX(-6px) scale(1.04) rotate(0.8deg)',
      'translateY(-10px) scale(1.05) rotate(-1.2deg)',
      'translateX(10px) scale(1.03) rotate(1.6deg)',
      'translateY(8px) scale(1.02) rotate(-0.8deg)'
    ];
    const t = transforms[idx % transforms.length];
    // briefly set stronger transform then settle for subtle parallax
    imgElement.style.transform = 'scale(.96) rotate(0deg)';
    setTimeout(()=> imgElement.style.transform = t, 40);
  }

  /* navigation */
  prevBtn.addEventListener('click', ()=>{
    if(index > 0) setImage(index - 1);
  });
  nextBtn.addEventListener('click', ()=>{
    if(index < images.length - 1) {
      setImage(index + 1);
    } else {
      // finished viewing images
      onImagesCompleted();
    }
  });
  firstBtn.addEventListener('click', ()=> setImage(0));
  lastBtn.addEventListener('click', ()=> setImage(images.length - 1));
  // keyboard navigation
  document.addEventListener('keydown', (e)=>{
    if(app.style.display === 'none' || pwScreen.style.display !== 'none') return;
    if(e.key === 'ArrowLeft') prevBtn.click();
    if(e.key === 'ArrowRight') nextBtn.click();
    if(e.key === 'Home') firstBtn.click();
    if(e.key === 'End') lastBtn.click();
  });

  // play video button
  playVideoBtn.addEventListener('click', ()=> {
    onImagesCompleted();
  });

  /* images finished -> show video area and auto-start video sequence */
  function onImagesCompleted(){
    // show video controls and start playing sequence
    videoWrap.style.display = 'block';
    autoplayVideoAfterImages = true;
    startVideoSequence();
    // scroll focus to video
    videoPlayer.scrollIntoView({behavior:'smooth', block:'center'});
  }

  /* video playback: play each part sequentially */
  function startVideoSequence(){
    videoPlayer.pause();
    videoIndex = 0;
    if(!videos || videos.length === 0) {
      // go directly to message screen
      goToMessageScreen();
      return;
    }
    videoPlayer.src = videos[videoIndex];
    try { videoPlayer.load(); } catch(e){}
    videoPlayer.play().catch(err=>{
      // autoplay often blocked; show play hint
      console.log('Autoplay blocked - user must press play', err);
      // show subtle overlay or keep controls visible and instruct user to press play
    });
  }

  // advance to next video part when one ends
  videoPlayer.addEventListener('ended', ()=>{
    videoIndex++;
    if(videoIndex < videos.length){
      videoPlayer.src = videos[videoIndex];
      videoPlayer.load();
      videoPlayer.play().catch(()=>{/* user must click if autoplay blocked */});
    } else {
      // video sequence finished -> move to message screen
      goToMessageScreen();
    }
  });

  /***** PASSWORD logic *****/
  pwBtn.addEventListener('click', enterPassword);
  pwInput.addEventListener('keydown', (e)=>{
    if(e.key === 'Enter') enterPassword();
  });

  function enterPassword(){
    const val = pwInput.value.trim();
    if(val === PASSWORD){
      // unlock
      pwScreen.style.display = 'none';
      app.style.display = 'flex';
      app.setAttribute('aria-hidden','false');
      // show first image
      setImage(0);
      // focus for keyboard nav
      nextBtn.focus();
    } else {
      alert('Wrong password. Try again.');
      pwInput.value = '';
      pwInput.focus();
    }
  }

  /* Message screen: typing effect */
  function goToMessageScreen(){
    // hide main UI, show message screen overlay
    messageScreen.style.display = 'flex';
    messageScreen.setAttribute('aria-hidden','false');
    // type the message realistically
    typeText(longMessage, messageText, 20, 90);
  }

  function typeText(textElOrString, container, minDelay=20, maxDelay=90){
    const text = (typeof textElOrString === 'string') ? textElOrString : textElOrString.textContent || '';
    container.textContent = '';
    let i = 0;
    function step(){
      if(i >= text.length) {
        // finish typing
        container.style.borderRight = 'none';
        return;
      }
      const ch = text[i++];
      container.textContent += ch;
      // create natural pauses for punctuation
      let delay = Math.random()*(maxDelay-minDelay)+minDelay;
      if(ch === ',' ) delay += 120;
      if(ch === '.' || ch === '!' || ch === '?') delay += 300;
      setTimeout(step, delay);
    }
    step();
  }

  /***** Prevent easy downloads & basic anti-capture measures *****/
  // disable right click
  document.addEventListener('contextmenu', (e)=> e.preventDefault());
  // disable drag of images
  document.addEventListener('dragstart', (e)=> {
    if(e.target.tagName === 'IMG' || e.target.tagName === 'VIDEO') e.preventDefault();
  }, false);

  // set video attribute to suggest no download (not foolproof)
  videoPlayer.setAttribute('controlsList','nodownload');

  // attempt to detect PrintScreen; cannot truly block OS-level screen capture
  // but we try to obfuscate quickly and show a warning (temporary blur)
  document.addEventListener('keyup', (e)=>{
    // keyCode 44 is PrintScreen on some systems
    if(e.key === 'PrintScreen' || e.keyCode === 44){
      // briefly blur main content and show overlay text
      const overlay = document.createElement('div');
      overlay.style.position = 'fixed';
      overlay.style.inset = '0';
      overlay.style.backdropFilter = 'blur(6px)';
      overlay.style.background = 'rgba(0,0,0,0.35)';
      overlay.style.zIndex = 9999;
      overlay.style.display = 'flex';
      overlay.style.alignItems = 'center';
      overlay.style.justifyContent = 'center';
      overlay.style.color = '#fff';
      overlay.style.fontSize = 'clamp(16px,2vw,22px)';
      overlay.textContent = 'Screen capture detected â€” this content is private.';
      document.body.appendChild(overlay);
      setTimeout(()=> overlay.remove(), 1200);
      // also try to clear clipboard (best-effort)
      try{ navigator.clipboard && navigator.clipboard.writeText(''); } catch(e){}
    }
  });

  // detect common fullscreen/capture shortcuts (not exhaustive)
  document.addEventListener('keydown', (e)=>{
    // block Ctrl+S, Ctrl+U, Ctrl+Shift+I, Ctrl+P
    if((e.ctrlKey || e.metaKey) && (e.key.toLowerCase() === 's' || e.key.toLowerCase() === 'u' || e.key.toLowerCase() === 'p')) {
      e.preventDefault(); alert('Saving/printing disabled for privacy.');
    }
    if(e.ctrlKey && e.shiftKey && (e.key.toLowerCase() === 'i' || e.key.toLowerCase() === 'j')) {
      e.preventDefault();
    }
  });

  /* Prevent image context menu / save on long touch mobile */
  currentImg.addEventListener('touchstart', (e)=> e.preventDefault(), {passive:false});

  /* Accessibility: hide heavy elements until password */
  app.style.display = 'none';

  // final safety: if images exist but not loaded yet, preload quietly to avoid flicker
  function preloadAll(){
    images.forEach(src => {
      const im = new Image();
      im.src = src;
    });
    videos.forEach(src => {
      // do not preload large video parts automatically (avoid bandwidth); only light probe
      // create but don't download fully; browser will handle on demand
    });
  }
  // preload image thumbnails (light)
  preloadAll();

  // End of script
  </script>
</body>
</html>
